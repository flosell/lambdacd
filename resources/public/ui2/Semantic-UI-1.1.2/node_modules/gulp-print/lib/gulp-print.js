// Generated by CoffeeScript 1.7.1
var green, log, magenta, map, path, print, _ref;

map = require('map-stream');

_ref = require('colors'), green = _ref.green, magenta = _ref.magenta;

path = require('path');

log = function() {
  var args, sig;
  sig = "[" + (green('gulp')) + "]";
  args = Array.prototype.slice.call(arguments);
  args.unshift(sig);
  return console.log.apply(console, args);
};

print = function(options) {
  var colors, format;
  if (options == null) {
    options = {};
  }
  if (typeof options === 'function') {
    options = {
      format: options
    };
  }
  format = options.format, colors = options.colors;
  if (colors == null) {
    colors = true;
  }
  if (format == null) {
    format = function(filepath) {
      return filepath;
    };
  }
  return map(function(file, cb) {
    var filepath, formatted;
    filepath = path.relative(process.cwd(), file.path);
    if (colors !== false) {
      filepath = magenta(filepath);
    }
    formatted = format(filepath);
    if (formatted) {
      print.log(formatted);
    }
    return cb(null, file);
  });
};

print.log = log;

module.exports = print;
